{"version":3,"file":"constraint.es.js","sources":["../src/common.ts","../src/constraint.ts","../src/index.ts"],"sourcesContent":["export function getSize(target: any) {\n    const scaleX = target.scale.x\n    const scaleY = target.scale.y\n    const width = target.isStage ? target.game.view.width : scaleX === 1 ? target.width : target.width / scaleX\n    const height = target.isStage ? target.game.view.height : scaleY === 1 ? target.height : target.height / scaleY\n    return { width, height }\n}","import { getSize } from './common'\n\nexport function putCenter(this: any, offsetX: number = 0, offsetY: number = 0) {\n    const executable = () => {\n        const { width: parentWidth, height: parentHeight} = getSize(this.parent)\n\n        this.x = (parentWidth - this.width) / 2 + offsetX\n        this.y = (parentHeight - this.height) / 2 + offsetY\n\n        if (this.anchor) {\n            this.anchor.set(.5)\n            this.x += this.width * this.anchor.x\n            this.y += this.height * this.anchor.y\n        } else {\n            this.pivot.x = this.width / 2\n            this.pivot.y = this.height / 2\n            this.x += this.pivot.x\n            this.y += this.pivot.y\n        }\n    }\n\n    this.on('added', () => executable())\n    if (this.parent) executable()\n}\n\nexport function putCenterX(this: any, offsetX: number = 0) {\n    const executable = () => {\n        const { width: parentWidth } = getSize(this.parent)\n        this.x = (parentWidth - this.width) / 2 + offsetX\n\n        if (this.anchor) {\n            this.anchor.x = .5\n            this.x += this.width * this.anchor.x\n        } else {\n            this.pivot.x = this.width / 2\n            this.x += this.pivot.x\n        }\n    }\n    this.on('added', () => executable())\n    if (this.parent) executable()\n}\n\nexport function putCenterY(this: any, offsetY: number = 0) {\n    const executable = () => {\n        const { height: parentHeight } = getSize(this.parent)\n        this.y = (parentHeight - this.height) / 2 + offsetY\n\n        if (this.anchor) {\n            this.anchor.y = .5\n            this.y += this.width * this.anchor.y\n        } else {\n            this.pivot.y = this.height / 2\n            this.y += this.pivot.y\n        }\n    }\n    this.on('added', () => executable())\n    if (this.parent) executable()\n}\n\nexport function putLeft(this: any, offsetX: number = 0) {\n    this.on('added', () => {\n        this.x = offsetX\n\n        if (this.anchor) {\n            this.anchor.x = .5\n            this.x += this.width * this.anchor.x\n        } else {\n            this.pivot.x = this.width / 2\n            this.x += this.pivot.x\n        }\n    })\n    if (this.parent) this.x = offsetX\n}\n\nexport function putTop(this: any, offsetY: number = 0) {\n    this.on('added', () => {\n        this.y = offsetY\n\n        if (this.anchor) {\n            this.anchor.y = .5\n            this.y += this.width * this.anchor.y\n        } else {\n            this.pivot.y = this.height / 2\n            this.y += this.pivot.y\n        }\n    })\n    if (this.parent) this.y = offsetY\n}\n\nexport function putRight(this: any, offsetX: number = 0) {\n    const executable = () => {\n        const { width: parentWidth } = getSize(this.parent)\n        this.x = parentWidth - this.width - offsetX\n\n        if (this.anchor) {\n            this.anchor.x = .5\n            this.x += this.width * this.anchor.x\n        } else {\n            this.pivot.x = this.width / 2\n            this.x += this.pivot.x\n        }\n    }\n    this.on('added', () => executable())\n    if (this.parent) executable()\n}\n\nexport function putBottom(this: any, offsetY: number = 0) {\n    const executable = () => {\n        const { height: parentHeight } = getSize(this.parent)\n        this.y = parentHeight - this.height - offsetY\n\n        if (this.anchor) {\n            this.anchor.y = .5\n            this.y += this.width * this.anchor.y\n        } else {\n            this.pivot.y = this.height / 2\n            this.y += this.pivot.y\n        }\n    }\n    this.on('added', () => executable())\n    if (this.parent) executable()\n}\n","import * as constraint from './constraint'\n\nexport default function ({ Container }: any) {\n    for (const key in constraint) {\n        Container.prototype[key] = constraint[key]\n    }\n}"],"names":[],"mappings":"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"}