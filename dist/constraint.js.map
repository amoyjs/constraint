{"version":3,"file":"constraint.js","sources":["../src/common.ts","../src/constraint.ts","../src/index.ts"],"sourcesContent":["const { innerWidth: width, innerHeight: height } = window\n\nexport const ScreenSize = {\n    width,\n    height,\n}\n\nexport function getSize(target: any, global = false) {\n    target = target.clone()\n    const scaleX = target.scale.x\n    const scaleY = target.scale.y\n    const width = target.isStage || global ? ScreenSize.width : target.width / scaleX\n    const height = target.isStage || global ? ScreenSize.height : target.height / scaleY\n\n    return {\n        width,\n        height,\n    }\n}\n\nexport function fix(target: any) {\n    if (target.anchor) {\n        target.x += target.width * target.anchor.x\n        target.y += target.height * target.anchor.y\n    } else {\n        target.x += target.pivot.x * target.scale.x\n        target.y += target.pivot.y * target.scale.y\n    }\n}\n\nexport function fixX(target: any) {\n    if (target.anchor) {\n        target.x += target.width * target.anchor.x\n    } else {\n        target.x += target.pivot.x * target.scale.x\n    }\n}\n\nexport function fixY(target: any) {\n    if (target.anchor) {\n        target.y += target.height * target.anchor.y\n    } else {\n        target.y += target.pivot.y * target.scale.y\n    }\n}","import { getSize, fix, fixX, fixY } from './common'\n\nexport function putCenter(target: any, offsetX: number = 0, offsetY: number = 0, global = false) {\n    if (typeof offsetX === 'boolean') {\n        global = offsetX\n        offsetX = 0\n        offsetY = 0\n    }\n    const executable = () => {\n        const { width: parentWidth, height: parentHeight } = getSize(target.parent, global)\n\n        target.x = (parentWidth - target.width) / 2 + offsetX\n        target.y = (parentHeight - target.height) / 2 + offsetY\n\n        fix(target)\n    }\n\n    target.on('added', () => executable())\n    if (target.parent) executable()\n}\n\nexport function putCenterX(target: any, offsetX: number = 0, global = false) {\n    if (typeof offsetX === 'boolean') {\n        global = offsetX\n        offsetX = 0\n    }\n    const executable = () => {\n        const { width: parentWidth } = getSize(target.parent, global)\n\n        target.x = (parentWidth - target.width) / 2 + offsetX\n\n        fixX(target)\n    }\n    target.on('added', () => executable())\n    if (target.parent) executable()\n}\n\nexport function putCenterY(target: any, offsetY: number = 0, global = false) {\n    if (typeof offsetY === 'boolean') {\n        global = offsetY\n        offsetY = 0\n    }\n    const executable = () => {\n        const { height: parentHeight } = getSize(target.parent, global)\n\n        target.y = (parentHeight - target.height) / 2 + offsetY\n\n        fixY(target)\n    }\n    target.on('added', () => executable())\n    if (target.parent) executable()\n}\n\nexport function putLeft(target: any, offsetX: number = 0, global = false) {\n    if (typeof offsetX === 'boolean') {\n        global = offsetX\n        offsetX = 0\n    }\n    target.on('added', () => {\n        target.x = offsetX\n\n        fixX(target)\n    })\n    if (target.parent) target.x = offsetX\n}\n\nexport function putTop(target: any, offsetY: number = 0, global = false) {\n    if (typeof offsetY === 'boolean') {\n        global = offsetY\n        offsetY = 0\n    }\n    target.on('added', () => {\n        target.y = offsetY\n\n        fixY(target)\n    })\n    if (target.parent) target.y = offsetY\n}\n\nexport function putRight(target: any, offsetX: number = 0, global = false) {\n    if (typeof offsetX === 'boolean') {\n        global = offsetX\n        offsetX = 0\n    }\n    const executable = () => {\n        const { width: parentWidth } = getSize(target.parent, global)\n\n        target.x = parentWidth - target.width - offsetX\n\n        fixX(target)\n    }\n    target.on('added', () => executable())\n    if (target.parent) executable()\n}\n\nexport function putBottom(target: any, offsetY: number = 0, global = false) {\n    if (typeof offsetY === 'boolean') {\n        global = offsetY\n        offsetY = 0\n    }\n    const executable = () => {\n        const { height: parentHeight } = getSize(target.parent, global)\n\n        target.y = parentHeight - target.height - offsetY\n\n        fixY(target)\n    }\n    target.on('added', () => executable())\n    if (target.parent) executable()\n}\n","import * as constraint from './constraint'\n\nexport const constraints = constraint\n\nexport default function ({ Container }: any) {\n    for (const key in constraints) {\n        Container.prototype[key] = function (...args: any) {\n            constraints[key](this, ...args)\n        }\n    }\n}"],"names":[],"mappings":"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"}